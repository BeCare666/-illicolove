<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title> Details</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

        <!-- Custom fonts for this template-->
        <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
        <link
            href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
            rel="stylesheet">
    
        <!-- Custom styles for this template-->
        <link href="css/sb-admin-2.min.css" rel="stylesheet">

  <!-- Link to import alert personnal -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.2/dist/sweetalert2.all.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.2/dist/sweetalert2.min.css">
<!-- Importation de la bibliothèque Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

<link
href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap"
rel="stylesheet">
<style>
* {
font-family: 'Montserrat-bold', sans-serif;
font-size: 13.5px !important;
}
</style>

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap"
      rel="stylesheet">
    <style>
    * {
      font-family: 'Montserrat-bold', sans-serif;
      font-size: 14px !important;
    }
  </style>
    <!-- Vendor CSS Files -->
    <link href="assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet">
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
    <!--Importation de smtpjs pour l'envoi de mail-->
     <script src="https://smtpjs.com/v3/smtp.js"></script>
    <!-- Template Main CSS File -->
    <link href="assets/css/stylea.css" rel="stylesheet">
  </head>

  <body>
    <section id="myBodyID">
        <main id="main">
          <!-- ======= Portfolio Details Section ======= -->
          <section id="portfolio-details" class="portfolio-details">
            <div class="container">
              <div class="row gy-4">
    
                <div class="col-lg-4 " id="mySliderId" >
                  <div class="slider">
                    <div class="slide">
                      <img  alt="Image 1" style="height:
                        45vh; width: 100%;" id="img1Id" >
                    </div>
                    <div class="slide">
                      <img   alt="Image 2" style="height:
                         45vh; width: 100%;" id="img2Id">
                    </div>
                  </div>
                </div>
                <div class="col-lg-4" id="mycoodonnees" style=" border: #FFB6C1 solid 1px;">
                  <div class="portfolio-info" style="height: 45vh !important;"  
                  >
                    <h2><strong>Mes coordonnées :</strong></h2>
                    <span id="iconValidateID"></span>
                    <ul class="list-group mt-4"  >
                      <li class="list-group-item" >
                        <div class="d-flex align-items-center">
                          <i class="bi bi-person-fill me-2 text-primary"></i>
                          <div>
                            <h5 class="mb-1" id="fullname"></h5>
                          </div>
                        </div>
                        <div class="d-flex align-items-center mt-3">
                          <i class="bi bi-geo-alt-fill me-2 text-info"></i>
                          <p class="mb-0" id="residenceId"></p>
                        </div>
                        <div class="d-flex align-items-center mt-3">
                          <i class="bi bi-person-workspace me-2 text-success"></i>
                          <p class="mb-0" id="occupation"></p>
                        </div>
                        <div id="contactUserID">
                        <div class="d-flex align-items-center mt-3">
                          <i class="bi bi-telephone-fill me-2 text-success"></i>
                          <p class="mb-0" id="phone"></p>
                        </div>
                        <div class="d-flex align-items-center mt-3">
                          <i class="bi bi-whatsapp me-2 text-success"></i>
                          <p class="mb-0" id="whatsapp"></p>
                        </div>
                        <div class="d-flex align-items-center mt-3">
                          <i class="bi bi-envelope-at-fill me-2 text-primary"></i>
                          <p class="mb-0" id="myEmail"></p>
                        </div>
                        </div>
    
                      </li>
                      <!-- Ajoutez d'autres éléments de liste ici -->
                    </ul>
                  </div>
                </div>
                <div class="col-lg-4" id="formysuiteId">
                    <span class="nav-item dropdown no-arrow" id="dropdowtToValidate" 
                    style="cursor: pointer;"> <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400" 
                    style="color: #FFB6C1 !important;"></i></span> 
                  <div class="portfolio-info" style="height: 45vh !important;">
                   <div style="height: 22vh;">
                    <h2><strong>Mes préférences physiques :</strong></h2>
                    <p id="suiteId"></p>
                   </div>
                   <h2><strong>Autres précisions :</strong></h2>
                   <p id="myprefenceId"></p>
                  </div>
                  
                </div>
              </div>
              <br>
              <style>
                table {
                  border-collapse: collapse;
                  width: 100%;
                  border: #FFB6C1 solid 1px;
                }
                
                th, td {
                  border: 1px solid #ddd;
                  padding: 8px;
                  text-align: left;
                  width: 50%;
                   border: #FFB6C1 solid 1px;
                }
                
                th {
                  background-color: #f2f2f2;
                }
                
                tr:nth-child(even) {
                  background-color: #f9f9f9;
                }
                
                tr:hover {
                  background-color: #eaeaea;
                }
              </style>
                
                <table>
                  <thead>
                    <tr>
                      <th>Mon Profil</th>
                      <th>Réponses</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Ma Ville de résidence :</td>
                      <td id="thmaville"></td>
                    </tr>
                    <tr>
                      <td>Mon nom ou pseudonyme:</td>
                      <td id="monpseudonyme"></td>
                    </tr>
                    <tr>
                      <td>Mon âge :</td>
                      <td id="monages"></td>
                    </tr>
                    <tr>
                      <td>Mon genre:</td>
                      <td id="myGenre"></td>
                    </tr>
                    <tr>
                      <td>Ma situation matrimoniale:</td>
                      <td id="masituamatri"></td>
                    </tr>
                    <tr>
                      <td>Ma nationalité :</td>
                      <td id="manationalite"></td>
                    </tr>
                    <tr>
                      <td>Mon travail ou occupation:</td>
                      <td id="montravail"></td>
                    </tr>
                    <tr>
                      <td>Je veux une rencontre :</td>
                      <td id="unerencontreId"></td>
                    </tr>
                  </tbody>
                </table>
                
                <br>
                
                <table>
                  <thead>
                    <tr>
                      <th>Profil que je cherche</th>
                      <th>Réponses</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Son genre :</td>
                      <td id="qsongenre"></td>
                    </tr>
                    <tr>
                      <td>Sa tranche d'âge :</td>
                      <td id="satranche"></td>
                    </tr>
                    <tr>
                      <td>Sa situation matrimoniale :</td>
                      <td id="sasituationMa"></td>
                    </tr>
                    <tr>
                      <td>Son pays de résidence :</td>
                      <td id="sonpays"></td>
                    </tr>
                    <tr>
                      <td>Sa ville d'habitation :</td>
                      <td id="saville"></td>
                    </tr>
                    <tr>
                      <td>Son travail ou occupation :</td>
                      <td id="sontravail"></td>
                    </tr>
                    </tbody>
                </table>            
            </div>
          </section><!-- End Portfolio Details Section -->
    
        </main><!-- End #main -->
     </section>

        <style>
            #dropdowtToValidate{
                position: absolute;
                top: 23px;
                right: 17px;
            }
            .my-confirm-button-class {
            background-color: #4caf50 !important; /* Couleur de fond pour le bouton de confirmation */
            color: #ffffff; /* Couleur du texte pour le bouton de confirmation */
            }

            .my-deny-button-class {
            background-color:#808080  !important; /* Couleur de fond pour le bouton de refus */
            color: #ffffff; /* Couleur du texte pour le bouton de refus */
            }

            .my-cancel-button-class {
            background-color: #f44336 !important; /* Couleur de fond pour le bouton Annuler */
            color: #ffffff; /* Couleur du texte pour le bouton Annuler */
            }
            #iconValidateID{
                position: absolute;
                top: 25px;
                left: 50.5vh;
            }
        </style>
        <script>
          const images = document.querySelectorAll('.slider img');
          let currentImageIndex = 0;
      
          function showNextImage() {
            images[currentImageIndex].classList.remove('active');
            currentImageIndex = (currentImageIndex + 1) % images.length;
            images[currentImageIndex].classList.add('active');
          }
      
          setInterval(showNextImage, 2000); // Change d'image toutes les 2 secondes
          //function to validate compte
        </script>
      </section><!-- End Portfolio Details Section -->

    </main><!-- End #main -->

    <footer id="footer" class="footer">

      <div class="footer-newsletter">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-12 text-center">
              <h4>Notre lettre d'information</h4>
              <p>Abonnez-vous pour recevoir régulièrement des mises à jour.</p>
            </div>
            <div class="col-lg-6">
              <form action="" method="post">
                <input type="email" name="email"><input type="submit"
                  value="Souscrire">
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="copyright">
          &copy; Copyright <strong><span style="color: #FFB6C1;">illicolove</span></strong>.
          All Rights Reserved
        </div>
        <div class="credits">
          Designed by <a href="https://bootstrapmade.com/">illicolove</a>
        </div>
      </div>
    </footer><!-- End Footer -->
</section>
          <a href="#" class="back-to-top d-flex align-items-center
            justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

          <div id="preloader"></div>
          <script type="module">

        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyCDGjJ1-gLtw0__8Om8OEzbXYNgBPWw1ik",
              authDomain: "illicolove0.firebaseapp.com",
              databaseURL: "https://illicolove0-default-rtdb.firebaseio.com",
              projectId: "illicolove0",
              storageBucket: "illicolove0.appspot.com",
              messagingSenderId: "687063035754",
              appId: "1:687063035754:web:7f03061d8cd5fd0ee9bf13"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);


        import {
            getDatabase,
            ref,
            set,
            update,
            child,
            onValue,
            remove,
            get,
        } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

        import { getStorage, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-storage.js"

        const db = getDatabase();

        //--------------Select data-----------------//
        function seleectData() {
          const UserID = localStorage.getItem("userID")
          var Thmaville = document.getElementById('thmaville');
        var Monpseudonyme = document.getElementById('monpseudonyme');
        var Monages = document.getElementById('monages');
        var MyGenre = document.getElementById('myGenre');
        var Masituamatri = document.getElementById('masituamatri');
        var Manationalite = document.getElementById('manationalite');
        var Montravail = document.getElementById('montravail');
        var UnerencontreId = document.getElementById('unerencontreId');
        var Qsongenre = document.getElementById('qsongenre');
        var Satranche = document.getElementById('satranche');
        var SasituationMa = document.getElementById('sasituationMa');
        var Sonpays = document.getElementById('sonpays');
        var Saville = document.getElementById('saville');
        var Sontravail = document.getElementById('sontravail');
          // function to logout
          if(!UserID){
            window.location.href = "login.html"
          }
          var OneUserID = localStorage.getItem("userIdTake").toString();
        // alert(OneUserID)
            const dbref = ref(db);
            get(child(dbref, "utilisateurs/" + OneUserID))
          .then((snapshot) => {
              if (snapshot.exists()) {
 
                document.getElementById('preloader').style.display = "none"
                var photoDataUrl1 = 'data:image/png;base64,' + snapshot.val().MESDEUXPHOTOS;
                var photoDataUrl2 = 'data:image/png;base64,' + snapshot.val().MESDEUXPHOTO2;
                //conditon ternaire to genre
                var status = snapshot.val().MONSEXE
                
                var img1Id = document.getElementById('img1Id');
                img1Id.src = photoDataUrl1
                var img2Id = document.getElementById('img2Id');
                img2Id.src = photoDataUrl2
                document.getElementById('fullname').innerHTML = `${snapshot.val().fullname}`
                document.getElementById('phone').innerHTML = `<a href="mailto:${snapshot.val().TELEPHONE}">${snapshot.val().TELEPHONE}</a>`
                document.getElementById('whatsapp').innerHTML = `<a href="https://wa.me/${snapshot.val().TELEPHONE}?text=Salut 
                ${snapshot.val().fullname},%20comment%20vas-tu%20?.%20Tu%20es%20${snapshot.val().MONTRAVAILLEOUOCCUPATION}.
                %20Je%20suis%20vraiment%20intéressé%20pas%20ton%20profil%20que%20j'ai%20vu%20sur%20le%20site%20de%20rencontre%20illicolove.">${snapshot.val().TELEPHONE}</a>`
                document.getElementById('myEmail').innerHTML = `<a href="mailto:${snapshot.val().email}">${snapshot.val().email}</a>`
                document.getElementById('residenceId').innerHTML = `${snapshot.val().MAVILLEDERESIDENCE}`
                document.getElementById('occupation').innerHTML = `${snapshot.val().MONTRAVAILLEOUOCCUPATION}`
                var suiteIdCondi = snapshot.val().PHYSIQUEDEPROFILQUEJECHERCHE ? snapshot.val().PHYSIQUEDEPROFILQUEJECHERCHE : `<i class="fas fa-database" style="font-size: 15vh !important; color: #FFB6C1;"></i>`;
                document.getElementById('suiteId').innerHTML = `${suiteIdCondi}`
                Thmaville.innerHTML = `${snapshot.val().MAVILLEDERESIDENCE}`
                Monpseudonyme.innerHTML = `${snapshot.val().username}`
                Monages.innerHTML = `${snapshot.val().MONAGE}`
                MyGenre.innerHTML = `${snapshot.val().MONSEXE}`
                Masituamatri.innerHTML = `${snapshot.val().MASITUATIONMATRIMONIALE}`
                Manationalite.innerHTML = `${snapshot.val().MANATIONNALITE}`
                Montravail.innerHTML = `${snapshot.val().MONTRAVAILLEOUOCCUPATION}`
                UnerencontreId.innerHTML = `${snapshot.val().JEVEUXUNERENCONTRE}`
                Qsongenre.innerHTML = `${snapshot.val().SEXEDEPROFILQUEJECHERCHE}`
                Satranche.innerHTML = `${snapshot.val().SONAGEDEPROFILQUEJECHERCHE}`
                SasituationMa.innerHTML = `${snapshot.val().SITUATIONMATRIMONIALEDEPROFILQUEJECHERCHE}`
                Sonpays.innerHTML = `${snapshot.val().PAYSDERESIDENCEDEPROFILQUEJECHERCHE}`
                Saville.innerHTML = `${snapshot.val().VILLEDHABITATIONDEPROFILQUEJECHERCHE}`
                Sontravail.innerHTML = `${snapshot.val().TRAVAILDEDEPROFILQUEJECHERCHE}`
                document.getElementById('myprefenceId').innerHTML = `${snapshot.val().AUTRESPRECISIONSDEPROFILQUEJECHERCHE}`
                
                var compteCertifie = snapshot.val().VALIDERMONCOMPTE
                var comptesuspendu = snapshot.val().MONCOMPTESUSPENDU
                var IconValidateID = document.getElementById('iconValidateID')

                if (compteCertifie) {
                  IconValidateID.innerHTML = '<i class="bi bi-patch-check-fill text-primary"></i> ';
                } else if (comptesuspendu) {
                  IconValidateID.innerHTML = '<i class="fas fa-lock"  style="color: #FFB6C1 !important;"></i>';
                } else {
                  IconValidateID.innerHTML = '<i class="fas fa-times-circle"  style="color: #FFB6C1 !important;"></i>';
                }
                document.getElementById('myprefenceId').innerHTML = `${snapshot.val().PHYSIQUEDEPROFILQUEJECHERCHE}`
              } else {
                document.getElementById('preloader').style.display = "none"
                  alert("no data");
              }
          })
          .catch((error) => {
                alert("il y a une ERROR " + error);
            });
          }
          window.onload = seleectData;

          //function to manage user coumpt

          var validateVarible = document.getElementById('dropdowtToValidate');
          var Footer = document.getElementById('footer');
            var MyBodyID = document.getElementById('myBodyID');
              validateVarible.addEventListener('click', function(){
               MyBodyID.style.display = "none" 
               Footer.style.display = "none" 
              var OneUserIDy = localStorage.getItem("userIdTake");
                Swal.fire({
                title: 'Voulez-vous valider ce compte ?',
                showDenyButton: true,
                showCancelButton: true,
                confirmButtonText: 'Certifier',
                denyButtonText: `Suspendre`,
                cancelButtonText: 'Supprimer',
                allowOutsideClick: false,
                footer:`<a href=""> <button class="fourth-button-class btn btn-primary" 
                id="fourth-button">Retour</button></a>`,

                customClass: {
                confirmButton: 'my-confirm-button-class',
                denyButton: 'my-deny-button-class', 
                cancelButton: 'my-cancel-button-class', 
                },
                }).then((result) => {
                /* Read more about isConfirmed, isDenied below */
                if (result.isConfirmed) {
                //function to validate account
                update(ref(db, "utilisateurs/" + OneUserIDy), {
                    VALIDERMONCOMPTE : true,
                    MONCOMPTESUSPENDU : false
                })
                .then(() => {
                // statr envoi de mail de validation
                const apiKey = "F14232488388C8DBEAB1A6EF5A3D3323F01D2F4BFAB8CDDC9C750A2018562AF805A25855732571939EB7235A48BAE1A7";
                const apiUrl = "https://api.elasticemail.com/v2/email/send";
                const Userfullename = localStorage.getItem("UserFullename")
                const UserEmail = localStorage.getItem("Useremail")

                // Définir les paramètres de l'e-mail
                const emailParams = {
                  apiKey: apiKey,
                  subject: "Validation de compte",
                  from: "paymybase@gmail.com",
                  fromName: "illicolove",
                  to: UserEmail,
                  bodyHtml: `
                  <table cellpadding="10" cellspacing="0" style="background-color: #f1f1f1; padding: 20px;">
                  <tr>
                      <td>
                      <h1 style="color: #333;">Félicitations ${Userfullename} !</h1>
                      <p style="font-size: 16px; color: #666;">
                          Nous sommes heureux de vous informer que votre compte illicolove a été validé avec succès. 
                          Cela signifie que vous pouvez désormais profiter des fonctionnalités suivantes :    
                      </p>
                      <ul>
                          <li>Modifier votre annonce</li>
                          <li>Consulter les annonces disponibles</li>
                          <li>Acheter des unités</li>
                      </ul>
                      <p style="font-size: 14px; color: #999;">
                          Restez à l'écoute pour recevoir d'autres nouvelles passionnantes !     
                      </p>
                      <p style="font-size: 14px; color: #999;">
                          Cordialement,     
                      </p>
                      <p style="font-size: 14px; color: #999;">
                          L'équipe illicolove.      
                      </p>
                      </td>
                  </tr>
                  </table>
                  `
                };

                // Effectuer une requête POST vers l'API ElasticEmail
                fetch(apiUrl, {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                  },
                  body: new URLSearchParams(emailParams)
                })
                  .then((response) => response.json())
                  .then((data) => {
                    console.log(data); // Afficher la réponse de l'API ElasticEmail
                    if (data.success) {
                      console.log("E-mail envoyé avec succès.");
                    } else {
                      console.error("Erreur lors de l'envoi de l'e-mail.");
                    }
                  })
                  .catch((error) => {
                    console.error("Erreur lors de la requête API :", error);
                  });
                 // end envoi de mail de validation
                 
                Swal.fire({
                title: 'Validé',
                icon: 'success',             
                allowOutsideClick: false,
                }).then((result) => {
                if (result.isConfirmed) {
                    location.reload();
                }
                })
                })
                .catch((error) => {
                    alert("les données ne sont pas mise à jour " + error);
                });

                } else if (result.isDenied) {
                //function to update compte
                update(ref(db, "utilisateurs/" + OneUserIDy), {
                    VALIDERMONCOMPTE : false,
                    MONCOMPTESUSPENDU : true
                })
                .then(() => {
                //  envoi de mail de suspension
                const apiKey = "F14232488388C8DBEAB1A6EF5A3D3323F01D2F4BFAB8CDDC9C750A2018562AF805A25855732571939EB7235A48BAE1A7";
                const apiUrl = "https://api.elasticemail.com/v2/email/send";
                const Userfullename = localStorage.getItem("UserFullename")
                const UserEmail = localStorage.getItem("Useremail")

                // Définir les paramètres de l'e-mail
                const emailParams = {
                  apiKey: apiKey,
                  subject: "Suspension de compte",
                  from: "paymybase@gmail.com",
                  fromName: "illicolove",
                  to: UserEmail,
                  bodyHtml: `
                  <table cellpadding="10" cellspacing="0" style="background-color: #f1f1f1; padding: 20px;">
                  <tr>
                      <td>
                      <h1 style="color: #333;">Désolé ${Userfullename} !</h1>
                      <p style="font-size: 16px; color: #666;">
                        Nous regrettons de vous informer que votre compte illicolove a été suspendu. 
                        Par conséquent, vous ne pourrez plus bénéficier des fonctionnalités suivantes :    
                      </p>
                      <ul>
                          <li>Modifier votre annonce</li>
                          <li>Consulter les annonces disponibles</li>
                          <li>Acheter des unités</li>
                      </ul>
                      <p style="font-size: 14px; color: #999;">
                          Restez à l'écoute pour recevoir de nouvelles !     
                      </p>
                      <p style="font-size: 14px; color: #999;">
                          Cordialement,     
                      </p>
                      <p style="font-size: 14px; color: #999;">
                          L'équipe illicolove.      
                      </p>
                      </td>
                  </tr>
                  </table>
                  `
                };

                // Effectuer une requête POST vers l'API ElasticEmail
                fetch(apiUrl, {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                  },
                  body: new URLSearchParams(emailParams)
                })
                  .then((response) => response.json())
                  .then((data) => {
                    console.log(data); // Afficher la réponse de l'API ElasticEmail
                    if (data.success) {
                      console.log("E-mail envoyé avec succès.");
                    } else {
                      console.error("Erreur lors de l'envoi de l'e-mail.");
                    }
                  })
                  .catch((error) => {
                    console.error("Erreur lors de la requête API :", error);
                  });
                 // end envoi de mail de suspension

                Swal.fire('Ce compte a été suspendu', '', 'info').then((result) => {
                if (result.isConfirmed) {
                    location.reload();
                }
                })
                })
                .catch((error) => {
                    alert("les données ne sont pas supprimées " + error);
                });
                
               
                }else{
                Swal.fire({
                title: 'Vous êtes sûr ?',
                text: "Vous ne pourrez pas revenir en arrière !",
                icon: 'warning',
                showCancelButton: true,
                allowOutsideClick: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Oui, supprimé le !'
                }).then((result) => {
                if (result.isConfirmed) {
                //function to delete compte
                remove(ref(db, "utilisateurs/" + OneUserIDy))
                .then(() => {
                  //  envoi de mail de suppression
                const apiKey = "F14232488388C8DBEAB1A6EF5A3D3323F01D2F4BFAB8CDDC9C750A2018562AF805A25855732571939EB7235A48BAE1A7";
                const apiUrl = "https://api.elasticemail.com/v2/email/send";
                const Userfullename = localStorage.getItem("UserFullename")
                const UserEmail = localStorage.getItem("Useremail")

                // Définir les paramètres de l'e-mail
                const emailParams = {
                  apiKey: apiKey,
                  subject: "Suppression De Compte",
                  from: "paymybase@gmail.com",
                  fromName: "illicolove",
                  to: UserEmail,
                  bodyHtml: `
                  <table cellpadding="10" cellspacing="0" style="background-color: #f1f1f1; padding: 20px;">
                  <tr>
                      <td>
                      <h1 style="color: #333;">Désolé ${Userfullename} !</h1>
                      <p style="font-size: 16px; color: #666;">
                        Nous regrettons de vous informer que votre compte illicolove a été supprimé. 
                        Par conséquent, vous ne pourrez plus bénéficier des fonctionnalités suivantes :    
                      </p>
                      <ul>
                          <li>Modifier votre annonce</li>
                          <li>Consulter les annonces disponibles</li>
                          <li>Acheter des unités</li>
                      </ul>
                      <p style="font-size: 14px; color: #999;">
                          Restez à l'écoute pour recevoir de nouvelles !     
                      </p>
                      <p style="font-size: 14px; color: #999;">
                          Cordialement,     
                      </p>
                      <p style="font-size: 14px; color: #999;">
                          L'équipe illicolove.      
                      </p>
                      </td>
                  </tr>
                  </table>
                  `
                };

                // Effectuer une requête POST vers l'API ElasticEmail
                fetch(apiUrl, {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                  },
                  body: new URLSearchParams(emailParams)
                })
                  .then((response) => response.json())
                  .then((data) => {
                    console.log(data); // Afficher la réponse de l'API ElasticEmail
                    if (data.success) {
                      console.log("E-mail envoyé avec succès.");
                    } else {
                      console.error("Erreur lors de l'envoi de l'e-mail.");
                    }
                  })
                  .catch((error) => {
                    console.error("Erreur lors de la requête API :", error);
                  });
                 // end envoi de mail de suppression

                    Swal.fire(
                    'Supprimé!',
                    'Ce compte a été supprimé',
                    'success'
                    ).then((result) => {
                if (result.isConfirmed) {
                    location.reload();
                }
                })
                
                })
                .catch((error) => {
                    alert("les données ne sont pas supprimées " + error);
                });

                  
                }else{
                    location.reload();
                }
                })
                }
                })
              })
  </script>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>

    <!-- Page level plugins -->
    <script src="vendor/chart.js/Chart.min.js"></script>

    <!-- Page level custom scripts -->
    <script src="js/demo/chart-area-demo.js"></script>
    <script src="js/demo/chart-pie-demo.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>

  </body>

</html>   